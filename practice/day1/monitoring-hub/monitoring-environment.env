# 모니터링 환경 설정 파일
# Cloud Intermediate 과정용 모니터링 설정
# 자동화 스크립트에서 모니터링 관련 환경 정보를 읽어 사용

# =============================================================================
# 모니터링 기본 설정
# =============================================================================
export MONITORING_NAMESPACE="monitoring"
export MONITORING_STORAGE_CLASS="gp2"
export MONITORING_PERSISTENT_VOLUME_SIZE="10Gi"

# =============================================================================
# Prometheus 설정
# =============================================================================
export PROMETHEUS_SERVER_PORT="9090"
export PROMETHEUS_RETENTION_TIME="15d"
export PROMETHEUS_STORAGE_SIZE="10Gi"
export PROMETHEUS_SCRAPE_INTERVAL="15s"
export PROMETHEUS_EVALUATION_INTERVAL="15s"
export PROMETHEUS_RULES_PATH="/etc/prometheus/rules"
export PROMETHEUS_ALERTMANAGER_URL="http://alertmanager:9093"

# =============================================================================
# Grafana 설정
# =============================================================================
export GRAFANA_SERVER_PORT="3000"
export GRAFANA_ADMIN_USER="admin"
export GRAFANA_ADMIN_PASSWORD="admin123"
export GRAFANA_DATASOURCE_NAME="Prometheus"
export GRAFANA_DATASOURCE_URL="http://prometheus-server:9090"
export GRAFANA_DASHBOARD_PATH="/var/lib/grafana/dashboards"
export GRAFANA_PROVISIONING_PATH="/etc/grafana/provisioning"

# =============================================================================
# Node Exporter 설정
# =============================================================================
export NODE_EXPORTER_PORT="9100"
export NODE_EXPORTER_NAMESPACE="monitoring"
export NODE_EXPORTER_SERVICE_ACCOUNT="node-exporter"
export NODE_EXPORTER_DAEMONSET_NAME="node-exporter"

# =============================================================================
# AlertManager 설정
# =============================================================================
export ALERTMANAGER_PORT="9093"
export ALERTMANAGER_CONFIG_PATH="/etc/alertmanager"
export ALERTMANAGER_STORAGE_PATH="/alertmanager"
export ALERTMANAGER_RETENTION_TIME="120h"

# =============================================================================
# 모니터링 대시보드 설정
# =============================================================================
export DASHBOARD_REFRESH_INTERVAL="5s"
export DASHBOARD_TIME_RANGE="1h"
export DASHBOARD_AUTO_REFRESH="true"
export DASHBOARD_THEME="dark"

# =============================================================================
# 알림 설정
# =============================================================================
export ENABLE_EMAIL_ALERTS="false"
export ENABLE_SLACK_ALERTS="false"
export ENABLE_WEBHOOK_ALERTS="true"
export ALERT_WEBHOOK_URL=""
export ALERT_EMAIL_SMTP_HOST=""
export ALERT_EMAIL_SMTP_PORT="587"
export ALERT_EMAIL_FROM=""
export ALERT_EMAIL_TO=""

# =============================================================================
# 리소스 제한 설정
# =============================================================================
export PROMETHEUS_CPU_LIMIT="1000m"
export PROMETHEUS_CPU_REQUEST="500m"
export PROMETHEUS_MEMORY_LIMIT="2Gi"
export PROMETHEUS_MEMORY_REQUEST="1Gi"

export GRAFANA_CPU_LIMIT="500m"
export GRAFANA_CPU_REQUEST="250m"
export GRAFANA_MEMORY_LIMIT="1Gi"
export GRAFANA_MEMORY_REQUEST="512Mi"

export NODE_EXPORTER_CPU_LIMIT="200m"
export NODE_EXPORTER_CPU_REQUEST="100m"
export NODE_EXPORTER_MEMORY_LIMIT="256Mi"
export NODE_EXPORTER_MEMORY_REQUEST="128Mi"

# =============================================================================
# 보안 설정
# =============================================================================
export ENABLE_RBAC="true"
export ENABLE_NETWORK_POLICIES="true"
export ENABLE_POD_SECURITY_POLICIES="false"
export MONITORING_SERVICE_ACCOUNT="monitoring-service-account"

# =============================================================================
# 네트워크 설정
# =============================================================================
export MONITORING_INGRESS_CLASS="nginx"
export MONITORING_INGRESS_HOST="monitoring.local"
export MONITORING_INGRESS_TLS_SECRET="monitoring-tls"
export MONITORING_SERVICE_TYPE="ClusterIP"

# =============================================================================
# 백업 및 복구 설정
# =============================================================================
export ENABLE_BACKUP="true"
export BACKUP_SCHEDULE="0 2 * * *"
export BACKUP_RETENTION_DAYS="7"
export BACKUP_STORAGE_PATH="/backup/monitoring"

# =============================================================================
# 로그 설정
# =============================================================================
export MONITORING_LOG_LEVEL="info"
export MONITORING_LOG_FORMAT="json"
export MONITORING_LOG_OUTPUT="stdout"
export MONITORING_LOG_FILE_PATH="/var/log/monitoring"

# =============================================================================
# 성능 모니터링 설정
# =============================================================================
export ENABLE_APM="true"
export ENABLE_TRACING="true"
export ENABLE_PROFILING="false"
export METRICS_COLLECTION_INTERVAL="30s"
export METRICS_RETENTION_DAYS="30"

# =============================================================================
# 통합 모니터링 설정
# =============================================================================
export ENABLE_CLOUDWATCH_INTEGRATION="true"
export ENABLE_GCP_MONITORING_INTEGRATION="true"
export ENABLE_AZURE_MONITORING_INTEGRATION="false"
export CLOUD_PROVIDER="aws"

# =============================================================================
# 실습 환경 설정
# =============================================================================
export MONITORING_PRACTICE_MODE="intermediate"
export MONITORING_DEBUG_MODE="true"
export MONITORING_DRY_RUN="false"
export MONITORING_RESOURCE_PREFIX="monitoring-intermediate"

# =============================================================================
# 태그 설정
# =============================================================================
export MONITORING_ENVIRONMENT_TAG="Learning"
export MONITORING_PROJECT_TAG="CloudIntermediate"
export MONITORING_OWNER_TAG="CloudIntermediate"
export MONITORING_COURSE_TAG="CloudIntermediate-Monitoring"

# =============================================================================
# 알림 규칙 설정
# =============================================================================
export ENABLE_CPU_ALERTS="true"
export ENABLE_MEMORY_ALERTS="true"
export ENABLE_DISK_ALERTS="true"
export ENABLE_NETWORK_ALERTS="true"
export ENABLE_POD_ALERTS="true"
export ENABLE_NODE_ALERTS="true"

# CPU 알림 임계값
export CPU_USAGE_THRESHOLD="80"
export CPU_USAGE_DURATION="5m"

# 메모리 알림 임계값
export MEMORY_USAGE_THRESHOLD="85"
export MEMORY_USAGE_DURATION="5m"

# 디스크 알림 임계값
export DISK_USAGE_THRESHOLD="90"
export DISK_USAGE_DURATION="2m"

# =============================================================================
# 대시보드 설정
# =============================================================================
export ENABLE_KUBERNETES_DASHBOARD="true"
export ENABLE_NODE_DASHBOARD="true"
export ENABLE_POD_DASHBOARD="true"
export ENABLE_SERVICE_DASHBOARD="true"
export ENABLE_INGRESS_DASHBOARD="true"

# =============================================================================
# 실습 완료 확인 설정
# =============================================================================
export MONITORING_HEALTH_CHECK_INTERVAL="30s"
export MONITORING_HEALTH_CHECK_TIMEOUT="300s"
export MONITORING_READY_CHECK_RETRIES="10"
export MONITORING_READY_CHECK_DELAY="30s"
